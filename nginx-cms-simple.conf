# Einfache Nginx-Config für CMS unter /cms
# 
# Setup:
# 1. Setze APP_PREFIX=/cms in docker-compose.yml
# 2. Füge diese Location zu deiner Nginx-Config hinzu
# 3. sudo nginx -t && sudo systemctl reload nginx

location /cms/ {
    # Proxy zu CMS Container
    proxy_pass http://localhost:5001/cms/;
    
    # Standard Proxy Headers
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Host $host;
    
    # Optional: Timeouts
    proxy_connect_timeout 60s;
    proxy_send_timeout 60s;
    proxy_read_timeout 60s;
    
    # Allow file uploads up to 16MB (matches Flask MAX_CONTENT_LENGTH)
    client_max_body_size 16M;
}

# Fertig! Die App läuft jetzt unter https://deine-domain.de/cms/
#
# URLs:
# - https://deine-domain.de/cms/           -> Redirect zu /reader/
# - https://deine-domain.de/cms/reader/    -> Public Reader
# - https://deine-domain.de/cms/admin/     -> Admin-Interface
